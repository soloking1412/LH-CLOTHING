const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MoastProducts.DW0ERuxm.chunk.min.js","./MediaUtilities.fyHQAIzQ.chunk.min.js","./class-map.DV2QBFxx.chunk.min.js","./widgetUtilities.CNzVh4Jk.chunk.min.js","./embla-carousel.esm.DIhUnPYQ.chunk.min.js","./lodash.85mmpLy3.chunk.min.js","./_commonjsHelpers.Cpj98o6Y.chunk.min.js","./MoastMute.DFliG3_h.chunk.min.js"])))=>i.map(i=>d[i]);
import{_ as p}from"./MediaUtilities.fyHQAIzQ.chunk.min.js";import y from"./embla-carousel.esm.DIhUnPYQ.chunk.min.js";import{M as x,e as g,c as b,n as f,W as w}from"./widgetUtilities.CNzVh4Jk.chunk.min.js";import{i as S,x as n,E as l,e as u,h as _,n as d,r as h,a as C,b as $}from"./class-map.DV2QBFxx.chunk.min.js";import{l as M}from"./lodash.85mmpLy3.chunk.min.js";import{m as k}from"./rte.BcX9A_LW.chunk.min.js";import"./_commonjsHelpers.Cpj98o6Y.chunk.min.js";var L=Object.defineProperty,o=(v,t,e,s)=>{for(var i=void 0,r=v.length-1,c;r>=0;r--)(c=v[r])&&(i=c(t,e,i)||i);return i&&L(t,e,i),i};const m=class m extends x($){constructor(){super(...arguments),this._widgetType="carousel",this._centeredMedia=!0,this.autoplayMode="all",this.autoscroll=0,this.productCards="none",this.showCaptions=!1,this.slideType="cards",this.paginationMode="overlay",this.alignment="center",this._initialized=!1,this._canLoop=!0,this._activeSlide=0,this._muted=!0,this._adjacentSlideCount=2,this._paused=!1,this._isHovered=!1,this._carousel=null,this._options={},this._componentsLoaded=!1,this._carouselInitRequested=!1,this._memoizedDistances=new Map,this._lastActiveSlide=-1,this._lastMediaLength=-1,this.carouselContainerRef=g(),this.carouselWrapperRef=g(),this._handleMouseEnter=()=>{this._isHovered||this.autoscroll===0||(this._isHovered=!0,this._clearAutoScrollInterval())},this._handleMouseLeave=()=>{!this._isHovered||this.autoscroll===0||(this._isHovered=!1,this._startAutoScroll())},this._resizeContainer=M.debounce(()=>{this._setAdjacentSlideCount(),this._carousel&&(this._canLoop=!0,this.updateComplete.then(()=>{this._carousel.reInit(this._options),this._canLoop=this._carousel.internalEngine().slideLooper.canLoop(),this._carousel.scrollTo(this._activeSlide,!0),this._carousel.reInit({active:this._canLoop})}))},300)}get _isActiveOnlyMode(){return this.autoplayMode==="showcase"||this.autoplayMode==="sequential"}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this._resizeContainer)}disconnectedCallback(){super.disconnectedCallback(),this._carousel&&(this._carousel.destroy(),this._carousel=null),this._clearAutoScrollInterval(),window.removeEventListener("resize",this._resizeContainer)}firstUpdated(t){super.firstUpdated(t),this._setAdjacentSlideCount()}willUpdate(t){var e,s;super.willUpdate(t),t.has("_media")&&this._media.length>0&&requestAnimationFrame(()=>{this._initialize()}),t.has("_moastContext")&&((e=this._moastContext)!=null&&e.accesses&&(this._moastContext.accesses.widgetCustomization||(this.autoscroll=0,this.productCards="none",this.showCaptions=!1)),(s=this._moastContext)!=null&&s.customCSS&&requestAnimationFrame(()=>{this._setAdjacentSlideCount()}))}_setAdjacentSlideCount(){var c;const t=((c=this._activeSlideElement)==null?void 0:c.clientWidth)??parseInt(getComputedStyle(this).getPropertyValue("--moast-slide-size")||"250"),e=parseInt(getComputedStyle(this).getPropertyValue("--moast-slide-spacing")||"16"),s=t+e*2,i=Math.floor(window.innerWidth/s),r=Math.max(1,Math.ceil(i/2)+1);r!==this._adjacentSlideCount&&(this._adjacentSlideCount=r)}_updateCircularDistances(){if(!(this._lastActiveSlide===this._activeSlide&&this._lastMediaLength===this.media.length)){this._memoizedDistances.clear(),this._lastActiveSlide=this._activeSlide,this._lastMediaLength=this.media.length;for(let t=0;t<this.media.length;t++){const e=Math.min((t-this._activeSlide+this.media.length)%this.media.length,(this._activeSlide-t+this.media.length)%this.media.length);this._memoizedDistances.set(t,e)}}}_getCircularDistance(t){return this._updateCircularDistances(),this._memoizedDistances.get(t)??0}_isSlideAdjacent(t){if(this.alignment==="center")return this._getCircularDistance(t)<=this._adjacentSlideCount;const e=this.media.length,s=this._activeSlide,i=(t-s+e)%e,r=(s-t+e)%e;return this.alignment==="left"?i>0&&i<=this._adjacentSlideCount*2||r===1:this.alignment==="right"?r>0&&r<=this._adjacentSlideCount*2||i===1:!1}_onIntersection(){super._onIntersection(),this._startAutoScroll()}_onIntersectionLeave(){super._onIntersectionLeave(),this._clearAutoScrollInterval()}_clearAutoScrollInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_startAutoScroll(){var t;this.autoscroll>0&&!this._isHovered&&this._carousel&&!((t=this._player)!=null&&t.open)&&(this._clearAutoScrollInterval(),this._interval=setInterval(()=>{this._scrollToNext()},this.autoscroll*1e3))}_scrollToPrevious(){var t;!this._canLoop&&this._isActiveOnlyMode?this._activeSlide=(this._activeSlide===0?this.media.length:this._activeSlide)-1:(t=this._carousel)==null||t.scrollPrev()}_scrollToNext(){var t;!this._canLoop&&this._isActiveOnlyMode?this._activeSlide=(this._activeSlide+1)%this.media.length:(t=this._carousel)==null||t.scrollNext()}_initialize(){if(!this._isConnected||this._carousel||this._initialized||this._carouselInitRequested)return;if(this._carouselInitRequested=!0,!this.carouselContainerRef.value||!this.carouselWrapperRef.value){this.updateComplete.then(()=>{this._initialize()});return}this._activeSlide=this.sort==="video"?Math.floor(this.media.length/2):0;let t="center";this.alignment==="left"?t="start":this.alignment==="right"&&(t="end"),this._options={container:this.carouselContainerRef.value,align:t,loop:!0,slides:".slide",startIndex:this._activeSlide,skipSnaps:!0},this._carousel=y(this.carouselWrapperRef.value,this._options,[w({forceWheelAxis:"x"})]),this._canLoop=this._carousel.internalEngine().slideLooper.canLoop(),this._canLoop||(this._isActiveOnlyMode&&(this._activeSlide=0),this._carousel.reInit({active:!1})),this._carousel.on("pointerDown",()=>{this._moastContext&&(this._moastContext.userInteracted=!0)}),this._carousel.on("init",async()=>{this._initialized=!0,this._startAutoScroll(),this._componentsLoaded||this._loadComponents()}),this._carousel.on("select",async()=>{this._activeSlide=this._carousel.selectedScrollSnap()%this.media.length})}async _loadComponents(){if(this._componentsLoaded)return;const t=[];t.push(p(()=>import("./MoastProducts.DW0ERuxm.chunk.min.js").then(e=>e.M),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),this._player||t.push(p(()=>import("./widgetUtilities.CNzVh4Jk.chunk.min.js").then(e=>e.g),__vite__mapDeps([3,2,1,4,5,6]),import.meta.url)),this.autoplayMode==="showcase"&&t.push(p(()=>import("./MoastMute.DFliG3_h.chunk.min.js"),__vite__mapDeps([7,2]),import.meta.url)),await Promise.all(t),this._componentsLoaded=!0}_handleSlideClick(t){const e=()=>{this._player.activeSlide=t,this._player.open=!0};this._player?e():(this._loadPlayer(),requestAnimationFrame(()=>{this._player&&e()})),this._muted||(this._player.muted=!1,this._muted=!0)}_renderNavIcon(){return n`
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M9.4712 6.54693C9.29751 6.72083 9.19995 6.95657 9.19995 7.20236C9.19995 7.44814 9.29751 7.68388 9.4712 7.85779L13.7624 12.149L9.4712 16.4402C9.30737 16.616 9.21818 16.8486 9.22242 17.0889C9.22666 17.3292 9.324 17.5584 9.49393 17.7283C9.66386 17.8983 9.89312 17.9956 10.1334 17.9999C10.3737 18.0041 10.6062 17.9149 10.7821 17.7511L15.7287 12.8044C15.9024 12.6305 16 12.3948 16 12.149C16 11.9032 15.9024 11.6675 15.7287 11.4936L10.7821 6.54693C10.6082 6.37324 10.3724 6.27568 10.1266 6.27568C9.88084 6.27568 9.64511 6.37324 9.4712 6.54693Z"
        />
      </svg>
    `}_renderProductCards(t){var e,s,i;return this.productCards==="none"||!((s=(e=t.productProfile)==null?void 0:e.products)!=null&&s.length)?l:n`
      <moast-products
        .products="${t.productProfile.products}"
        .profileRef="${(i=t.productProfile)==null?void 0:i.ref}"
        .mediaRef="${t.ref}"
        .overlay=${this.productCards==="overlay"}
      ></moast-products>
    `}_renderMedia(){return this.media.length?b(this.media,t=>t.ref,(t,e)=>{const s=this._activeSlide===e,i=this._isSlideAdjacent(e);return n`
          <div
            class=${u({slide:!0,"is-active":s})}
            data-index=${e}
            data-adjacent=${i}
          >
            <div class="card-container">
              <div class="card-wrapper">
                <div part=${this.customCSS!==null?"card":""} class="card">
                  <button
                    type="button"
                    class="card__player"
                    @click=${()=>this._handleSlideClick(e)}
                    @toggle-play=${()=>this._handleSlideClick(e)}
                  >
                    ${_(s||i?n` <moast-media
                            .media=${t}
                            .loopDuration=${this.autoplayMode==="all"?3:null}
                            .autoplay=${!!(!this._paused&&(this.autoplayMode==="all"||s&&this._isActiveOnlyMode))}
                            .controls=${!1}
                            .muted=${!!(this._muted||!s)}
                            .playOnHover=${this.autoplayMode==="none"}
                            .preload=${!0}
                            @media-error=${()=>{this._removeMedia(t.ref)}}
                          ></moast-media>`:n`<div></div>`)}
                  </button>
                  ${this.autoplayMode==="showcase"&&t.contentType==="Video"?n`
                        <moast-mute
                          .muted=${!!(this._muted&&s)}
                          @muted-change=${r=>{this._muted=r.detail.muted}}
                        ></moast-mute>
                      `:l}
                  ${this.productCards==="overlay"?this._renderProductCards(t):l}
                </div>
              </div>
            </div>
            ${this.productCards==="below"?this._renderProductCards(t):l}
            ${this.showCaptions&&t.caption?n`<p
                  class="caption"
                  .innerHTML=${k(t.caption)}
                ></p>`:l}
          </div>
        `}):n``}_onPlayerReady(){this._player.addEventListener("moast-player-open",()=>{setTimeout(()=>{this._clearAutoScrollInterval(),this._paused=!0},300)}),this._player.addEventListener("moast-player-close",()=>{this._startAutoScroll(),this._paused=!1})}_renderPagination(){return this.paginationMode==="none"||this.media.length<=1||!this._canLoop&&["all","none"].includes(this.autoplayMode)?l:n`
      <button
        type="button"
        aria-label="Previous"
        class="carousel__prev"
        part=${this.customCSS!==null?"carousel__prev":""}
        @click=${this._scrollToPrevious}
      >
        ${_(this._renderNavIcon())}
      </button>
      <button
        type="button"
        aria-label="Next"
        class="carousel__next"
        part=${this.customCSS!==null?"carousel__next":""}
        @click=${this._scrollToNext}
      >
        ${_(this._renderNavIcon())}
      </button>
    `}render(){return this.media.length===0?l:n`
      <div
        ${f(this.carouselWrapperRef)}
        class=${u({"carousel-wrapper":!0,"is-initialized":this._initialized,"has-media":this.media.length>0,"has-captions":this.showCaptions,"has-pagination-below":this.paginationMode==="below"})}
        @mouseenter=${this._handleMouseEnter}
        @mouseleave=${this._handleMouseLeave}
        @focusin=${this._handleMouseEnter}
        @focusout=${this._handleMouseLeave}
        @touchstart=${this._handleMouseEnter}
        @touchend=${this._handleMouseLeave}
      >
        <div class="moast-skeleton">
          <slot></slot>
        </div>
        <div
          class=${u({carousel:!0,"carousel--shrink":!this._canLoop,[`carousel--${this.slideType}`]:!0,"carousel--showcase":this.autoplayMode==="showcase"&&this.slideType==="cards",[`carousel--${this.alignment}`]:!0})}
        >
          <div ${f(this.carouselContainerRef)} class="slides">
            ${this._renderMedia()}
          </div>
          ${this.paginationMode==="overlay"?this._renderPagination():l}
        </div>
        ${this.paginationMode==="below"?n`<div class="pagination">${this._renderPagination()}</div>`:l}
      </div>
    `}};m.styles=S`
    .carousel-wrapper {
      direction: ltr;
      display: block;
      position: relative;
      overflow: hidden;
      padding-top: calc(
        var(--moast-padding-top, 40px) + (var(--moast-border, 0px) * 3)
      );
      padding-bottom: calc(
        var(--moast-padding-bottom, 40px) + (var(--moast-border, 0px) * 3)
      );
      contain: layout style paint;
      overflow-anchor: none;
      container-type: inline-size;

      /* Ignore caption height when pagination is below */
      &.has-pagination-below {
        padding-bottom: calc(
          var(--moast-padding-bottom, 40px) + (var(--moast-border, 0px) * 3)
        );
      }
    }

    .moast-skeleton {
      opacity: 1;
      transition: opacity 0.3s ease-in-out;
      width: 100%;
      z-index: 1;

      .has-media & {
        position: absolute;
        top: 0;
        left: 0;
      }

      .is-initialized.has-media & {
        pointer-events: none;
        opacity: 0;
      }
    }

    .carousel {
      --moast-aspect-ratio: 9 / 16;
      opacity: 0;
      position: relative;
      margin: 0 var(--moast-slide-spacing, 16px);

      .carousel-wrapper:not(.has-media) & {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
      }

      .is-initialized & {
        opacity: 1;
      }
    }

    .carousel--showcase {
      moast-mute {
        position: absolute;
        top: 8px;
        right: 8px;
        border-radius: 50%;
        background-color: var(--moast-background, rgba(0, 0, 0, 0.9));
        padding: 4px;
        width: 24px;
        height: 24px;
        z-index: 1;
      }

      .caption,
      moast-mute,
      moast-products {
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
      }

      .is-active .caption,
      .is-active moast-products,
      .is-active moast-mute {
        opacity: 1;
      }
    }

    .carousel--stories {
      --moast-aspect-ratio: 1 / 1;
      --moast-slide-rounding: 50%;

      moast-products {
        display: none;
      }
    }

    .slides {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      position: relative;

      .carousel--shrink & {
        justify-content: center;
      }

      .carousel--shrink.carousel--left & {
        justify-content: flex-start;
      }

      .carousel--shrink.carousel--right & {
        justify-content: flex-end;
      }
    }

    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 8px;
      padding: 0 12px;
      gap: 12px;
    }

    .carousel__prev,
    .carousel__next {
      position: absolute;
      transform: translateY(-50%);
      top: 50%;
      z-index: 1;
      border-radius: 50%;
      background-color: var(--moast-background, rgba(0, 0, 0, 0.9));
      border: none;
      width: 40px;
      height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      pointer-events: auto;
      transition:
        background-color 0.3s,
        box-shadow 0.3s;
      box-shadow: 0 2px 5px rgb(0 0 0 / 20%);

      .pagination & {
        position: static;
        top: auto;
        left: auto;
        transform: none;
        box-shadow: none;
        background-color: transparent;
      }

      &:hover {
        background-color: var(--moast-background, rgba(0, 0, 0, 0.9));
        box-shadow: 0 4px 8px rgb(0 0 0 / 30%);
      }

      @container (max-width: 700px) {
        width: 26px;
        height: 26px;
      }

      @media (max-width: 700px) {
        display: none;
      }
    }

    .carousel__prev svg,
    .carousel__next svg {
      transition: fill 0.2s ease-in-out;
      fill: var(--moast-text, rgba(255, 255, 255, 1));

      .pagination & {
        fill: inherit;
      }
    }

    .carousel__prev:hover svg,
    .carousel__next:hover svg {
      fill: var(--moast-text, rgba(255, 255, 255, 1));
    }

    .carousel__prev {
      left: 12px;

      svg {
        transform: rotate(180deg);
      }
    }

    .carousel__next {
      right: 12px;
    }

    .slide {
      margin: 0
        calc(var(--moast-slide-spacing, 16px) / 2 + var(--moast-border, 0px));
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      align-items: center;
      width: 100%;
      gap: 8px;
      max-width: var(--moast-slide-size, 250px);
      position: relative;

      @media screen and (max-width: 700px) {
        max-width: calc(var(--moast-slide-size, 250px) * 0.75);
        min-width: 100px;
      }

      .carousel--stories & {
        @media screen and (max-width: 700px) {
          max-width: calc(var(--moast-slide-size, 250px) * 0.85);
          min-width: 70px;
        }
      }

      .carousel--shrink & {
        flex-shrink: 1;
        min-width: 0;
      }

      moast-products {
        width: 100%;
      }
    }

    .card-container {
      aspect-ratio: var(--moast-aspect-ratio);
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      align-items: center;
      justify-content: center;
      width: 100%;
    }

    .card-wrapper {
      aspect-ratio: var(--moast-aspect-ratio);
      position: relative;
      margin: 0 auto;
      width: 100%;

      .carousel--showcase & {
        aspect-ratio: 9 / 14;
        overflow: hidden;

        .is-active & {
          aspect-ratio: var(--moast-aspect-ratio);
        }
      }

      .is-initialized .carousel--showcase & {
        transition: aspect-ratio 0.3s ease-in-out;
      }

      &::before {
        content: '';
        position: absolute;
        inset: 0;
        z-index: 0;
        border-radius: calc(
          var(--moast-slide-rounding, 20px) + (var(--moast-border, 0px) + 2px)
        );

        border: var(--moast-border, 0px) solid transparent;
        background-image:
          linear-gradient(white, white), var(--moast-border-color);
        background-origin: border-box;
        background-clip: content-box, border-box;
        margin: calc(
          (var(--moast-border, 0px) + min(2px, calc(2 * var(--moast-border)))) *
            -1
        );
      }
    }

    .card {
      aspect-ratio: var(--moast-aspect-ratio);
      border-radius: var(--moast-slide-rounding, 20px);
      background-color: rgba(227, 227, 227, 1);
      overflow: hidden;
      scroll-snap-align: center;
      position: relative;
      contain: content;
      container-type: inline-size;
      height: 100%;
      width: 100%;
      clip-path: inset(-0.5px round var(--moast-slide-rounding, 20px));

      moast-media {
        display: block;
        line-height: 0;
        width: 100%;
        height: 100%;
      }

      moast-products {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 1;
      }
    }

    .card__player {
      border: 0;
      background: transparent;
      cursor: pointer;
      padding: 0;
      display: block;
      width: 100%;
      height: 100%;
      border-radius: 0;

      &:focus {
        outline: auto;
      }
    }

    .caption {
      font-size: 12px;
      text-align: center;
      line-height: 1.2;
      display: -webkit-box;
      margin: 0 calc(-1 * var(--moast-slide-spacing, 16px) / 2);
      line-clamp: 2;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .caption a {
      color: inherit;
      pointer-events: auto;
    }
  `;let a=m;o([d({type:String,attribute:"autoplay-mode"})],a.prototype,"autoplayMode");o([d({type:Number})],a.prototype,"autoscroll");o([d({type:String,attribute:"product-cards"})],a.prototype,"productCards");o([d({type:Boolean,attribute:"show-captions"})],a.prototype,"showCaptions");o([d({type:String,attribute:"slide-type"})],a.prototype,"slideType");o([d({type:String,attribute:"pagination-mode"})],a.prototype,"paginationMode");o([d({type:String,attribute:"alignment"})],a.prototype,"alignment");o([h()],a.prototype,"_initialized");o([h()],a.prototype,"_canLoop");o([h()],a.prototype,"_activeSlide");o([h()],a.prototype,"_muted");o([h()],a.prototype,"_adjacentSlideCount");o([h()],a.prototype,"_paused");o([C(".slide.is-active, .slide")],a.prototype,"_activeSlideElement");customElements.get("moast-carousel")||customElements.define("moast-carousel",a);
